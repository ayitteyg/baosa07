<!DOCTYPE html>
{% extends 'root/base.html' %} {% load static %}
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>baosa07</title>
    

    
    <!-- Make sure these are included before your custom JS -->
  </head>

  <body style="height:100vh">
    {% block content %}

    <div class="login-container">
      <img src="{% static 'images/baosa.png' %}" alt="Logo" class="login-logo" />
      <h5 class="text-infox">baosa.07</h5>
      <form action="{% url 'login' %}" method="POST">
        {% csrf_token %}



      <div class="form-group mb-3 position-relative">
        <div class="input-group">
            <span class="input-group-text bg-light">
                <i class="bi bi-search text-primary"></i>
            </span>
            <input class="form-control form-control-lg" type="text" id="username" name="username" autocomplete="off" required placeholder="username">
        </div>
        <div id="suggestions" class="dropdown-suggestions"></div>
    </div>





      
      <div class="form-group mb-3">
          <div class="input-group">
              <span class="input-group-text bg-light">
                  <i class="bi bi-lock text-primary fs-5"></i>
              </span>
              <input class="form-control form-control-lg" type="password" id="password" 
                     name="password" required placeholder="password">
          </div>
      </div>
        <button type="submit" class="login-btn">Login</button>
     </form> <br>

     {% comment %} <a href="tel:0549053295" class="text-decoration-none text-center">
      <i class="bi bi-telephone me-2 text-danger py-3"></i>
      <span class="text-muted fs-medium">0549053295</span>
    </a> {% endcomment %}

    </div>


  
{% comment %}       

<script>
  const input = document.getElementById('username');
const suggestionsBox = document.getElementById('suggestions');

input.addEventListener('input', async function() {
    const query = this.value.trim().toLowerCase();
    suggestionsBox.innerHTML = '';

    if (!query) {
        suggestionsBox.style.display = 'none';
        return;
    }

    try {
        const response = await fetch(`/api/departments/?q=${encodeURIComponent(query)}`);
        if (!response.ok) {
            console.error('API error:', response.status);
            suggestionsBox.style.display = 'none';
            return;
        }

        const usernames = await response.json();

        if (usernames.length > 0) {
            usernames.forEach(name => {
                const div = document.createElement('div');
                div.classList.add('dropdown-item');
                div.textContent = name;
                div.addEventListener('click', function() {
                    input.value = name;
                    suggestionsBox.style.display = 'none';
                });
                suggestionsBox.appendChild(div);
            });
            suggestionsBox.style.display = 'block';
        } else {
            suggestionsBox.style.display = 'none';
        }
    } catch (error) {
        console.error('Fetch error:', error);
        suggestionsBox.style.display = 'none';
    }
});

// Hide dropdown when clicking outside
document.addEventListener('click', function(e) {
    if (!e.target.closest('.form-group')) {
        suggestionsBox.style.display = 'none';
    }
});

</script> {% endcomment %}






<script>
  const usernames = [
  'Treasury',
  'Secretariat',
  'Deaconry',
  'Sabbath School',
  'Religious Liberty/VOP',
  'Health',
  'Stewardship',
  'Personal Ministry',
  'Possibility Ministry',
  'Communication',
  'Children Ministry',
  'Publishing Ministry',
  'Music',
  'Adventist Men Ministry',
  'Womens Ministry',
  'Audit',
  'Youth',
  'Family Ministry',
  'Education',
  'Welfare',
  'PA System',
  'Interest Coordinator',
  'Community Service',
  'Project',
  'Congregation',
  'admin',
];

  
  const input = document.getElementById('username');
  const suggestionsBox = document.getElementById('suggestions');
  
  input.addEventListener('input', function() {
      const query = this.value.toLowerCase();
      suggestionsBox.innerHTML = '';
      
      if (!query) {
          suggestionsBox.style.display = 'none';
          return;
      }
  
      const matches = usernames.filter(name => name.toLowerCase().includes(query));
  
      if (matches.length > 0) {
          matches.forEach(name => {
              const div = document.createElement('div');
              div.classList.add('dropdown-item');
              div.textContent = name;
              div.addEventListener('click', function() {
                  input.value = name;
                  suggestionsBox.style.display = 'none';
              });
              suggestionsBox.appendChild(div);
          });
          suggestionsBox.style.display = 'block';
      } else {
          suggestionsBox.style.display = 'none';
      }
  });
  
  // Hide dropdown when clicking outside
  document.addEventListener('click', function(e) {
      if (!e.target.closest('.form-group')) {
          suggestionsBox.style.display = 'none';
      }
  });
  </script
  

    
      {% endblock %}

  </body>
</html>